<%- include('dashboardheader') %>
<div id="global-loader">
<div class="whirly-loader"> </div>
</div>

<div class="main-wrapper">

<%- include('dashheader') %>

<%- include('mainsidebar') %>

<div class="page-wrapper">
<div class="content">
<div class="row">
<div class="col-lg-3 col-sm-6 col-12">
<div class="dash-widget">
<div class="dash-widgetimg">
<span><img src="../assets/img/icons/dash1.svg" alt="img"></span>
</div>
<div class="dash-widgetcontent">
<h5>$<span class="counters" data-count="<%= totalQty %>"><%= totalQty %></span></h5>
<h6>Total Items Sold</h6>
</div>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
<div class="dash-widget dash1">
<div class="dash-widgetimg">
<span><img src="../assets/img/icons/dash2.svg" alt="img"></span>
</div>
<div class="dash-widgetcontent">
<h5>$<span class="counters" data-count="<%= (totalPrice).toFixed(2) %>">$<%= (totalPrice).toFixed(2) %></span></h5>
<h6>Revenue</h6>
</div>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
<div class="dash-widget dash2">
<div class="dash-widgetimg">
<span><img src="../assets/img/icons/dash3.svg" alt="img"></span>
</div>
<div class="dash-widgetcontent">
<h5>$<span class="counters" data-count="385656.50">385,656.50</span></h5>
<h6>Sales</h6>
</div>
</div>
</div>
<div class="col-lg-3 col-sm-6 col-12">
<div class="dash-widget dash3">
<div class="dash-widgetimg">
<span><img src="../assets/img/icons/dash4.svg" alt="img"></span>
</div>
<div class="dash-widgetcontent">
<h5>$<span class="counters" data-count="40000.00">400.00</span></h5>
<h6>Total Revenue</h6>
</div>
</div>
</div>
<!-- <div class="col-lg-3 col-sm-6 col-12 d-flex">
<div class="dash-count">
<div class="dash-counts">
<h4>100</h4>
<h5>Customers</h5>
</div>
<div class="dash-imgs">
<i data-feather="user"></i>
</div>
</div>
</div> -->
<!-- <div class="col-lg-3 col-sm-6 col-12 d-flex">
<div class="dash-count das1">
<div class="dash-counts">
<h4>100</h4>
<h5>Suppliers</h5>
</div>
<div class="dash-imgs">
<i data-feather="user-check"></i>
</div>
</div>
</div> -->
<!-- <div class="col-lg-3 col-sm-6 col-12 d-flex">
<div class="dash-count das2">
<div class="dash-counts">
<h4>100</h4>
<h5>Purchase Invoice</h5>
</div>
<div class="dash-imgs">
<i data-feather="file-text"></i>
</div>
</div>
</div> -->
<!-- <div class="col-lg-3 col-sm-6 col-12 d-flex">
<div class="dash-count das3">
<div class="dash-counts">
<h4>105</h4>
<h5>Sales Invoice</h5>
</div>
<div class="dash-imgs">
<i data-feather="file"></i>
</div>
</div>
</div> 
</div>-->

<div class="row">

    <div class="col-md-6">
        <div class="card">
            <div class="card-header d-flex justify-content-between align-items-center">
                <h5 class="card-title">Sales Chart</h5>
                <select id="timeInterval" class="form-select w-auto">
                    <option value="daily">Daily</option>
                    <option value="weekly">Weekly</option>
                    <option value="monthly">Monthly</option>
                    <option value="yearly">Yearly</option>
                </select>
            </div>
            <div class="card-body">
                <div id="s-line" class="chart-set"></div>
            </div>
        </div>
    </div>


    <div class="col-lg-6 col-sm-12 col-12 d-flex">
        <div class="card flex-fill">
            <div class="card-header pb-0 d-flex justify-content-between align-items-center">
                <h4 class="card-title mb-0">Best Selling Categories</h4>
                <div class="dropdown">
                    <a href="javascript:void(0);" data-bs-toggle="dropdown" aria-expanded="false" class="dropset">
                        <i class="fa fa-ellipsis-v"></i>
                    </a>
                    <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton">
                        <li>
                            <a href="productlist.html" class="dropdown-item">Categories</a>
                        </li>
                        <li>
                            <a href="addproduct.html" class="dropdown-item">Total Revenue</a>
                        </li>
                    </ul>
                </div>
            </div>
            <div class="card-body">
                <div class="table-responsive dataview">
                    <table class="table datatable ">
                        <thead>
                            <tr>
                                <th>Sno</th>
                                <th>Categories</th>
                                <th>Items Sold</th>
                                <th>Total Revenue</th>
                            </tr>
                        </thead>
                        <tbody>
                            <% sortedCategoryStats.forEach((element,index)=> { %>
                                <tr>
                                    <td>
                                        <%= index+1 %>
                                    </td>
                                    <td class="productimgname">
                                        <%= element.categoryName %>
                                    </td>
                                    <td>
                                        <%= element.totalQty %>
                                    </td>
                                    <td>$ <%= element.totalPrice %>
                                    </td>
                                </tr>
                                <% }) %>
    
    
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>



</div>
<div class="card mb-0">
<div class="card-body">
<h4 class="card-title">Best Selling Products</h4>
<div class="table-responsive dataview">
<table class="table datatable ">
<thead>
<tr>
<th>SNo</th>

<th>Product Name</th>

<th>Category Name</th>
<th>Original Price</th>
<th>Avg Sale Price</th>
<th>Unit Sold</th>
<th>Revenue</th>

</tr>
</thead>
<tbody>
    <% bestProducts.forEach((element,index) => { %>
    <tr>
        <td><%= index+1 %></td>
        <td class="productimgname">
            <a class="product-img" href="productlist.html">
                <img src="..<%= element.Product_item_id.Image_filename[0] %>" alt="product">
            </a>
            <a href="productlist.html">
                <%= element._id %>
            </a>
        </td>
       <td></td>
        
    
        <td><%= element.Product_item_id.Product_variation_id.Product_item_id.Original_price %></td>
        <td><%= element.totalPrice/element.totalQty%></td>
        <td><%= element.totalQty %></td>
        <td><%= element.totalPrice %></td>
    </tr>
    <% }) %>


</tbody>
</table>
</div>
</div>
</div>
</div>
</div>
</div>


<script src="../assets/js/jquery-3.6.0.min.js"></script>

<script src="../assets/js/feather.min.js"></script>

<script src="../assets/js/jquery.slimscroll.min.js"></script>

<script src="../assets/js/jquery.dataTables.min.js"></script>
<script src="../assets/js/dataTables.bootstrap4.min.js"></script>

<script src="../assets/js/bootstrap.bundle.min.js"></script>

<script src="../assets/plugins/apexchart/apexcharts.min.js"></script>
<script src="../assets/plugins/apexchart/chart-data.js"></script>

<script src="../assets/js/script.js"></script>


</body>
</html>